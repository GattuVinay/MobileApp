<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 20

        canvas.before:
            Rectangle:
                source: "Backgroung.png"  
                pos: self.pos
                size: self.size

        Label:
            text: "Greate Learning"
            font_size: 30
            color: 0, 0, 0, 1

        TextInput:
            id: user_id
            hint_text: "User ID"
            multiline: False
            write_tab: False
            

        TextInput:
            id: password
            hint_text: "Password"
            multiline: False
            write_tab: False
            password: True

        Label:
            id: login_message
            text: ""
            color: (1, 0, 0, 1)  # Red text for errors

        Button:
            text: "Login"
            on_press: root.validate_user()

        Button:
            text: "Exit"
            on_press: app.stop()

<ProfilePopup@Popup>:
    title: "User Profile"
    size_hint: 0.8, 0.6 
    auto_dismiss: True

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 20

        # Profile Picture
        FloatLayout:
            Image:
                source: 'Profile.png'  
                size_hint: None, None
                size: 150, 150
                allow_stretch: True
                keep_ratio: True
                halign: 'center'
                valign: 'middle'
                pos_hint: {"center_x": 0.5, "center_y": 0.5} 

        # User Name
        Label:
            id: user_name_label
            text: "[username]" 
            font_size: 20
            halign: 'center'
            valign: 'middle'
            text_size: self.size 

        # Close Button
        Button:
            text: "Close"
            size_hint_y: None
            height: 40
            on_press: root.dismiss()

<HomeScreen>:
    BoxLayout:
        orientation: 'vertical'
                
        canvas.before:
            Rectangle:
                source: "Backgroung.png"  
                pos: self.pos
                size: self.size

        # Navigation Bar
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 70
            padding: [10, 10]
            spacing: 25
            canvas.before:
                Color:
                    rgba: 0.1, 0.3, 0.6, 1  # Dark blue background for navigation bar
                Rectangle:
                    pos: self.pos
                    size: self.size

            Label:
                text: "Dashboard"
                font_size: 24
                color: 1, 1, 1, 1
                halign: 'left'
                valign: 'center'
                size_hint_x: 0.8

            Button:
                text: "Profile"
                size_hint: None, None   # Set fixed dimensions for a rectangular shape
                size: 70, 70          # Width and height of the rectangle
                on_press: app.show_profile_popup()

        # Main Content
        BoxLayout:
            orientation: 'vertical'
            spacing: 125
            padding: [30, 20]

            GridLayout:
                cols: 3  # Three columns for icons
                spacing: 100
                padding: [60, 20]
                size_hint_y: None
                height: 200

                Button:
                    text: ""
                    background_normal: 'automata_icon.png'  # Automata icon
                    size_hint: None, None
                    size: 150, 150
                    on_press: app.select_category('automata'); app.root.current = 'automata'

                Button:
                    text: ""
                    background_normal: 'formal_languages_icon.png'  # Formal Languages icon
                    size_hint: None, None
                    size: 150, 150
                    on_press: app.select_category('formal_languages'); app.root.current = 'formal_languages'

                Button:
                    text: ""
                    background_normal: 'grammars_icon.png'  # Grammars icon
                    size_hint: None, None
                    size: 150, 150
                    on_press: app.select_category('grammars'); app.root.current = 'grammars'

            Label:
                text: "Learning Portal"
                font_size: 28
                halign: 'center'
                valign: 'center'
                color: 0, 0, 0, 1
                size_hint_y: None
                height: 50

            Button:
                text: "Log out"
                size_hint: None, None
                size: 150, 50
                pos_hint: {'center_x': 0.5}
                on_press: app.root.current = 'login'
        
# Automata Lessons
<AutomataScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 50

        canvas.before:
            Rectangle:
                source: "Background.png"  
                pos: self.pos
                size: self.size

        Label:
            text: "Automata Lessons"
            font_size: 24
            bold: True
            color: 0, 0, 0, 1

        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: 10

                Button:
                    text: "1. Introduction to Automata"
                    size_hint_y: None
                    height: 50
                    font_size: 18
                    on_press: 
                        app.set_automata_detail("Introduction to Automata","Formal Languages","""A language can be seen as a system suitable for expression of certain ideas, facts, and concepts.For formalizing the notion of a language, one must cover all varieties of languages, such as natural (human) languages and programming languages. Let us look at some common features across the languages. One may broadly see that a language is a collection of sentences;a sentence is a sequence of words; and a word is a combination of syllables. If one considers a language that has a script, then it can be observed that a word is a sequence of symbols of its underlying alphabet. It is observed that a formal learning of a language has the following three steps.""")
                
                Button:
                    text: "2. Deterministic Finite Automata (DFA)"
                    size_hint_y: None
                    height: 50
                    font_size: 18
                    on_press: 
                        app.set_automata_detail("Deterministic Finite Automata (DFA)","DFAs are...","""A deterministic finite automaton (DFA) is a model of computation. It is a finite state machine that accepts or rejects strings of symbols and only produces a unique computation (or sequence of states) for each input string.""")

                Button:
                    text: "3. Nondeterministic Finite Automata (NFA)"
                    size_hint_y: None
                    height: 50
                    font_size: 18
                    on_press: 
                        app.set_automata_detail("Nondeterministic Finite Automata (NFA)","NFAs are...","""A nondeterministic finite automaton (NFA) is similar to a DFA, but it allows multiple transitions for a single input symbol and can even proceed without consuming any input.""")

                Button:
                    text: "4. Pushdown Automata (PDA)"
                    size_hint_y: None
                    height: 50
                    font_size: 18
                    on_press: 
                        app.set_automata_detail("Pushdown Automata (PDA)","PDAs extend...","""A pushdown automaton (PDA) is a finite automaton equipped with a stack. It is useful for modeling computations that require a memory of unbounded size but only in a last-in-first-out order.""")

                Button:
                    text: "5. Turing Machines"
                    size_hint_y: None
                    height: 50
                    font_size: 18
                    on_press: 
                        app.set_automata_detail("Turing Machines","Turing Machines are...","""A Turing machine is a mathematical model of computation that defines an abstract machine.Despite its simplicity, it is capable of simulating any computer algorithm.""")

        BoxLayout:
            size_hint_y: None
            height: 60
            spacing: 750

            Button:
                text: ""
                background_normal: 'back_arrow.png' 
                size_hint: None, None
                size: 70, 70
                on_press: app.root.current = 'home'
            Button:
                text: ""
                background_normal: 'practice_icon.png'  
                size_hint: None, None
                size: 90, 90
                on_press: app.root.current = 'automata_practice'
                 

# Practice Screen
<AutomataPracticeScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 50
        color: 0, 0, 0, 1
        canvas.before:
            Rectangle:
                source: "Backgroung.png"  
                pos: self.pos
                size: self.size

        Label:
            id: question_label
            text: "Question will appear here."
            font_size: 20
            halign: 'center'
            color: 0, 0, 0, 1
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                Button:
                    id: option_a
                    text: "Option A"
                    size_hint_y: None
                    height: 40
                    on_press: app.check_answer('A')
                Button:
                    id: option_b
                    text: "Option B"
                    size_hint_y: None
                    height: 40
                    on_press: app.check_answer('B')
                Button:
                    id: option_c
                    text: "Option C"
                    size_hint_y: None
                    height: 40
                    on_press: app.check_answer('C')
                Button:
                    id: option_d
                    text: "Option D"
                    size_hint_y: None
                    height: 40
                    on_press: app.check_answer('D')
        Button:
            text: ""
            background_normal: 'back_arrow.png' 
            size_hint: None, None
            size: 70, 70
            on_press: app.refresh_screen('automata')

<AutomataDetailScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [30, 20, 30, 20]  # Left, Top, Right, Bottom padding

        canvas.before:
            Rectangle:
                source: "Background.png"  
                pos: self.pos
                size: self.size

        # Title Section
        Label:
            id: heading_label  # Updated ID
            text: "Automata Topic"
            font_size: 24
            bold: True
            color: 0, 0, 0, 1
            halign: "center"
            valign: "middle"
            size_hint_y: None
            height: 40

        # Paragraph Section
        Label:
            id: paragraph_heading  # Added ID for paragraph heading
            text: "Paragraph Heading"
            font_size: 20
            bold: True
            color: 0, 0, 0, 1
            halign: "center"
            valign: "middle"
            size_hint_y: None
            height: 30

        # Content Section with ScrollView
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            bar_width: 10
            bar_color: [0.2, 0.6, 0.8, 0.8]  # Light blue scroll bar color
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                padding: 10
                spacing: 10

                Label:
                    id: content_label  # Updated ID
                    text: "Detailed explanation of the topic will appear here."
                    font_size: 18
                    halign: "justify"
                    valign: "top"
                    size_hint_y: None
                    text_size: self.width, None  # Adjust text width to box
                    height: self.texture_size[1]
                    color: 0, 0, 0, 1

        # Navigation Button Section
        BoxLayout:
            size_hint_y: None
            height: 60
            padding: [0, 10, 0, 10]  # Padding for better alignment
            spacing: 20

            Button:
                text: ""
                background_normal: 'back_arrow.png' 
                size_hint: None, None
                size: 70, 70
                on_press: app.root.current = 'automata'


<FormalDetailScreen>:

    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 50
        canvas.before:
            Rectangle:
                source: "Backgroung.png"  
                pos: self.pos
                size: self.size
        Label:
            id: title
            text: "Formal Languages Topic"
            font_size: 24
            color: 0, 0, 0, 1
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                Label:
                    id: content
                    text: "Detailed explanation of the topic will appear here."
                    font_size: 16
                    size_hint_y: None
                    height: self.texture_size[1]
                    color: 0, 0, 0, 1
        Button:
            text: ""
            background_normal: 'back_arrow.png' 
            size_hint: None, None
            size: 70, 70
            on_press: app.root.current = 'formal_languages'

           

<GrammarsDetailScreen>:

    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 50
        canvas.before:
            Rectangle:
                source: "Backgroung.png"  
                pos: self.pos
                size: self.size
        Label:
            id: title
            text: "Grammar Topic"
            font_size: 24
            color: 0, 0, 0, 1
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                Label:
                    id: content
                    text: "Detailed explanation of the topic will appear here."
                    font_size: 30
                    color: 0, 0, 0, 1
                    size_hint_y: None
                    height: self.texture_size[1]
        Button:
            text: ""
            background_normal: 'back_arrow.png' 
            size_hint: None, None
            size: 70, 70
            on_press: app.root.current = 'grammars'

   
# Formal Languages Lessons
<FormalLanguagesScreen>:

    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 50
        color:0, 0, 0, 1
        canvas.before:
            Rectangle:
                source: "Backgroung.png"  
                pos: self.pos
                size: self.size
        Label:
            text: "Formal Languages Lessons"
            font_size: 20
            color: 0, 0, 0, 1
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                Button:
                    text: "1. Introduction to Formal Languages"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_formal_detail("Introduction to Formal Languages", "Formal Languages are mathematical models ...")
                Button:
                    text: "2. What is Grammar in Computation?"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_formal_detail("Formal Languages", "Formal ...")
                Button:
                    text: "3. Representation of Grammar"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_formal_detail("Formal Languages", "Formal ...")
                Button:
                    text: "4. Types of Grammars"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_formal_detail("Formal Languages", "Formal ...")
                Button:
                    text: "5. What is an ambiguous grammar?"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_formal_detail("Formal Languages", "Formal ...")
        BoxLayout:
            size_hint_y: None
            height: 60
            spacing: 750
            Button:
                text: ""
                background_normal: 'back_arrow.png' 
                size_hint: None, None
                size: 70, 70
                on_press: app.root.current = 'home'
            Button:
                text: ""
                background_normal: 'pratice_icon.png' 
                size_hint: None, None
                size: 90, 90
                on_press: app.root.current = 'automata_practice'

# Grammars Lessons
<GrammarsScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: 40
        canvas.before:
            Rectangle:
                source: "Backgroung.png"  
                pos: self.pos
                size: self.size
        Label:
            text: "Grammars Lessons"
            font_size: 20
            color: 0, 0, 0, 1
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                Button:
                    text: "1. Introduction to Grammars"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_gramma_detail("Introduction to Grammars","Grammars.......")
                Button:
                    text: "2. Regular Grammars"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_gramma_detail("Regular Grammars","Regular Grammars are........")
                Button:
                    text: "3. Context-Free Grammars"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_gramma_detail("Context-Free Grammars","Context-Free.....")
                Button:
                    text: "4. Derivation Trees"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_gramma_detail("Derivation Trees","Derivation Trees.........")
                Button:
                    text: "5. Ambiguity in Grammars"
                    size_hint_y: None
                    height: 40
                    on_press: app.set_gramma_detail("Ambiguity in Grammars","Ambiguity.........................")
        BoxLayout:
            size_hint_y: None
            height: 60
            spacing: 750
            Button:
                text: ""
                background_normal: 'back_arrow.png'
                size_hint: None, None
                size: 70, 70
                on_press: app.root.current = 'home'
            Button:
                text: ""
                background_normal:'pratice_icon.png'
                size_hint: None, None
                size: 90, 90
                on_press: app.root.current = 'automata_practice'


        